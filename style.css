:root {
    --red-team: #e74c3c;
    --blue-team: #3498db;
    --grass: #27ae60;
    --sky: #87CEEB;
    --ui-bg: rgba(255, 255, 255, 0.9);
}

* { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-user-select: none; font-family: 'Roboto', sans-serif; }

body { width: 100vw; height: 100vh; overflow: hidden; background: #000; }

/* Xoay màn hình */
#rotate-lock {
    position: fixed; inset: 0; background: #2c3e50; color: white;
    display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;
}
.icon-rotate { font-size: 50px; animation: spin 2s infinite; margin-bottom: 20px;}
@keyframes spin { 0% {transform: rotate(0deg)} 25% {transform: rotate(-90deg)} 100% {transform: rotate(0deg)} }

@media (orientation: portrait) {
    #rotate-lock { display: flex; }
    #game-wrapper { display: none; }
}

/* Game Wrapper */
#game-wrapper {
    position: relative; width: 100%; height: 100%;
    background: linear-gradient(to bottom, var(--sky) 0%, #fff 40%, var(--grass) 40%, #2ecc71 100%);
}

canvas { display: block; width: 100%; height: 100%; position: absolute; top: 0; left: 0; }

/* UI Layer (Nổi lên trên Canvas) */
.ui-layer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; justify-content: space-between; pointer-events: none; /* Để click xuyên qua vùng trống */
}

/* Khu vực người chơi */
.player-ui {
    width: 300px; height: 100%; padding: 10px;
    display: flex; flex-direction: column; justify-content: space-between;
    pointer-events: auto; /* Cho phép bấm nút */
}

/* Bảng Toán */
.math-board {
    background: white; border-radius: 15px; padding: 15px; text-align: center;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2); border: 4px solid #ccc; position: relative;
    overflow: hidden;
}
.p1-board { border-color: var(--red-team); }
.p2-board { border-color: var(--blue-team); }

.timer-bar { height: 6px; background: #eee; width: 100%; position: absolute; top: 0; left: 0; }
.timer-bar div { height: 100%; width: 100%; transition: width 0.1s linear; }
#p1-timer-fill { background: var(--red-team); }
#p2-timer-fill { background: var(--blue-team); }

.question-text { font-family: 'Titan One', cursive; font-size: 2rem; color: #333; margin: 10px 0; }
.answer-box { 
    background: #f1f2f6; height: 50px; border-radius: 8px; 
    font-size: 2rem; font-weight: bold; line-height: 50px; color: #2c3e50;
    border-bottom: 3px solid #ddd;
}

/* Đồng hồ tổng */
.center-clock {
    padding-top: 10px;
}
#main-timer {
    background: rgba(0,0,0,0.6); color: white; padding: 5px 20px;
    border-radius: 20px; font-weight: bold; font-size: 1.5rem;
    font-family: 'Titan One'; border: 2px solid white;
}

/* Bàn phím */
.keypad {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
    background: rgba(255,255,255,0.8); padding: 10px; border-radius: 15px;
}
.keypad button {
    background: white; border: none; height: 45px; border-radius: 8px;
    font-size: 1.5rem; font-weight: bold; color: #555;
    box-shadow: 0 4px 0 rgba(0,0,0,0.15); cursor: pointer;
    transition: transform 0.1s;
}
.keypad button:active { transform: translateY(3px); box-shadow: 0 0 0; }
.btn-clear { background: #ff7675 !important; color: white !important; }
.btn-ok { background: #55efc4 !important; color: white !important; }

/* Màn hình Start/End */
.overlay {
    position: absolute; inset: 0; background: rgba(0,0,0,0.8);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    color: white; z-index: 100;
}
.hidden { display: none !important; }

.game-title { font-family: 'Titan One'; font-size: 4rem; color: #f1c40f; text-shadow: 4px 4px 0 #d35400; margin-bottom: 10px; }
.btn-primary {
    background: linear-gradient(to bottom, #f1c40f, #f39c12);
    border: none; padding: 15px 50px; border-radius: 50px;
    font-size: 2rem; font-family: 'Titan One'; color: #c0392b;
    cursor: pointer; box-shadow: 0 8px 0 #d35400; margin-top: 20px;
}
.btn-primary:active { transform: translateY(4px); box-shadow: 0 4px 0 #d35400; }
.pulse { animation: pulse 1s infinite; }
@keyframes pulse { 0% {transform: scale(1)} 50% {transform: scale(1.05)} 100% {transform: scale(1)} }
